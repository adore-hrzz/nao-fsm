State machine
=============

Module is working as a finite state machine.

State machine consists of 6 states: 
	
                    1) **Start**: Initial state of FSM, this is the start point of module. In Start, all initializations are conducted: parameters from configuration file are imported, communication parameters for manipulation with NAO are defined, ect.


                    2) **Initial**: In this state NAO is set to it's initial position, standing.


                    3) **Search**: Searching for object with NAO's camera. If object is found close to NAO, module goes to next state, if not, NAO looks for object in distance and around him, if object is found NAO moves towards it until he hits his foot bumper. If object is not found at all, module goes back to initial state.  


                    4) **Image processing**: Image processing of object image taken with NAO's camera. Image processing consist of segmentation, to exclude object from surrounding, and calculating grab point on object. If image processing goes wrong, module goes back to inital state. 


                    5) **Object manipulation**: In this state all object manipulation is done. NAO grabs object, does the coresponding gesture and puts object back to it's place.


                    6) **Object tracking**: Module is tracking object's trajectory waiting to detect same gesture that NAO has done in previous step. After this, module goes back to initial state.


.. figure::  Flowchart.jpeg
   :align:   center
